function resizeThumb(a,b,c,d){var e,f,g,h,i;return e=a/b,f=c/d,f>=e?(g=a/c,h=c,i=intval(b/g)):(g=b/d,h=intval(a/g),i=d),[h,i]}function intval(a,b){var c;return"string"==typeof a?(c=parseInt(a),isNaN(c)?0:c.toString(b||10)):"number"==typeof a?Math.floor(a):0}!function(a){a.fn.extend({nbpAnimate:function(b){var c=a(this),d=b;return this.each(function(){function l(){g||h||(h=!0,f=0,e=0,a(".nbp_slider",c).animate({top:"-="+i},d.speed,"easeOutQuad",function(){clearTimeout(b);var e=a(".nbp_slider .new_holder:eq(0)",c).clone(!0);a(".nbp_slider",c).append(e),a(".nbp_slider .new_holder:eq(0)",c).remove(),h=!1,b=setTimeout(m,d.stay),a(".nbp_slider",c).css("top","-"+d.invisible_news_top*i+"px")}))}function m(){g||h||(h=!0,f=0,e=0,a(".nbp_slider",c).animate({top:"+="+i},d.speed,"easeOutQuad",function(){clearTimeout(b);var e=a(".nbp_slider .new_holder",c).last().clone(!0);a(".nbp_slider",c).prepend(e),a(".nbp_slider .new_holder",c).last().remove(),h=!1,b=setTimeout(m,d.stay),a(".nbp_slider",c).css("top","-"+d.invisible_news_top*i+"px")}))}var i,b=null,e=0,f=0,g=!1,h=!1;d.max_news-d.board_fit,i=parseFloat(a(".nbp_slider .new_holder:eq(0)",c).outerHeight())+d.margin_bottom,d.max_news>d.board_fit&&a(".nbp_slider",c).css("top","-"+d.invisible_news_top*i+"px"),a(".bar #btn_up",c).bind("click",function(){l()}),a(".bar #btn_down",c).bind("click",function(){m()}),d.max_news>d.board_fit&&(a(".nbp_news",c).bind("mouseenter mouseleave",function(i){var j=new Date;if("mouseenter"==i.type)g=!0,h||(a(".nbp_slider .new_holder",c).stop(!0,!1),clearTimeout(b),e=j.getTime());else if("mouseleave"==i.type){g=!1;var k;0!=e?f+=j.getTime()-e:f=d.stay/2,k=f>=d.stay?1:d.stay-f,b=setTimeout(m,k)}}),b=setTimeout(m,d.stay)),a(".nbp_slider .new_holder .image .new_thumbnail img.nbp_real_rss_img",c).each(function(){var b=a(this).parent(),c=a(this);c.on("load",function(){var a=c.getNatProp("naturalWidth"),d=c.getNatProp("naturalHeight"),e=b.cssNumber("width"),f=b.cssNumber("height"),g=resizeThumb(a,d,e,f),h=g[0],i=g[1],j=intval((i-f)/-2),k=intval((h-e)/-2);c.css({width:h,height:i,top:j,left:k}),c.show(),b.css("background","")})})})}})}($nbp),$nbp.fn.cssNumber=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},$nbp.fn.getNatProp=function(a){var c,d,b=this[0];return"img"===b.tagName.toLowerCase()&&(c=new Image,c.src=b.src,d=c[a]),d};